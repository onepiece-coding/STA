
<section>
  <div class="mx-auto max-w-screen-xl flex min-h-full flex-col justify-center px-4 py-8 sm:px-6 lg:px-8">
    <h2 class="text-center text-2xl font-bold tracking-tight text-gray-800">Changer le mot de passe</h2>

    <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
      <form [formGroup]="changePasswordFormData" (submit)="onSubmit()" class="space-y-6">
        <div>
          <label for="currentPassword" class="block text-sm/6 font-medium text-gray-900" [class.text-red-600!]="currentPassword.touched && currentPassword.dirty && currentPassword.invalid">Mot de passe actuel</label>
          <div class="mt-2">
            <input pInputText id="currentPassword" type="password" [formControl]="currentPassword" class="w-full"
              [class.border-red-600!]="currentPassword.touched && currentPassword.dirty && currentPassword.invalid" autocomplete="currentPassword" />
            @if(currentPassword.touched && currentPassword.dirty) {
              @if(currentPassword.getError("required")) {
              <div class="text-red-600 text-sm mt-1">Le mot de passe actuel est requis!</div>
              }
            }
          </div>
        </div>

        <div>
          <label for="newPassword" class="block text-sm/6 font-medium text-gray-900" [class.text-red-600!]="newPassword.touched && newPassword.dirty && newPassword.invalid">Nouveau mot de passe</label>
          <div class="mt-2">
            <input pInputText id="newPassword" type="password" [formControl]="newPassword" class="w-full"
              [class.border-red-600!]="newPassword.touched && newPassword.dirty && newPassword.invalid"
              autocomplete="newPassword" />
            @if(newPassword.touched && newPassword.dirty) {
              @if(newPassword.getError("required")) {
              <div class="text-red-600 text-sm mt-1">Un nouveau mot de passe est requis!</div>
              }
            }
          </div>
        </div>

        <div>
          <label for="confirmPassword" class="block text-sm/6 font-medium text-gray-900" [class.text-red-600!]="confirmPassword.touched && confirmPassword.dirty && confirmPassword.invalid">Confirmez le mot de passe</label>
          <div class="mt-2">
            <input pInputText id="confirmPassword" type="password" [formControl]="confirmPassword" class="w-full"
              [class.border-red-600!]="confirmPassword.touched && confirmPassword.dirty && confirmPassword.invalid"
              autocomplete="confirmPassword" />
            @if(confirmPassword.touched && confirmPassword.dirty) {
              @if(confirmPassword.hasError("passwordNotMatch")) {
                <div class="text-red-600 text-sm mt-1">Le nouveau mot de passe et le mot de passe de confirmation ne sont pas identiques</div>
              }
            }
          </div>
        </div>

        <div>
          <p-button type="submit" label="Soumettre" severity="success" [loading]="loading" />
        </div>
      </form>
    </div>
  </div>
</section>

<p-toast [breakpoints]="{ '576px': { width: 'calc(100% - 30px)', right: '0', left: '15px' } }" />
